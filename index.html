<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>自動リダイレクトページ</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
    <link rel="manifest" href="/pwa-listen2/manifest.json">
    <meta name="theme-color" content="#3367D6">

    <style>
    /* スイッチボタンのスタイル */
    .switch {
      position: relative;
      display: inline-block;
      width: 50px;
      height: 26px;
      margin-right: 8px;
    }
    .switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }
    .slider {
      position: absolute;
      cursor: pointer;
      top: 0; left: 0; right: 0; bottom: 0;
      background-color: #ccc;
      transition: .3s;
      border-radius: 13px;
    }
    .slider:before {
      position: absolute;
      content: "";
      height: 22px;
      width: 22px;
      left: 2px;
      bottom: 2px;
      background-color: white;
      transition: .3s;
      border-radius: 50%;
    }
    input:checked + .slider {
      background-color: #4CAF50;
    }
    input:checked + .slider:before {
      transform: translateX(24px);
    }
  </style>
</head>
<body>
    <script>
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('/pwa-listen2/sw.js')
          .then(() => console.log('SW registered'))
          .catch(console.error);
      }
    </script>

  
    <h1>自動リダイレクトページ</h1>
    
    <p id="info">
    5秒後に
    <a id="target-link" href="#">—</a>
    に移動します。
    </p>
    
    <label class="switch">
    <input type="checkbox" id="redirect-toggle" checked>
    <span class="slider"></span>
    </label>
    <span id="toggle-label">自動遷移ON</span>
    
    <script>
    const TARGET_URL = 'https://www.bbc.co.uk/learningenglish/english/features/6-minute-english';  // ← ここを変更
    const DELAY_MS   = 5000;
    
    // 初期表示の設定
    document.getElementById('target-link').href = TARGET_URL;
    document.getElementById('target-link').textContent = TARGET_URL;
    
    let redirectEnabled = true;
    let timeoutId = startRedirectTimer();
    
    // スイッチの切り替えイベント
    document.getElementById('redirect-toggle').addEventListener('change', e => {
      redirectEnabled = e.target.checked;
      document.getElementById('toggle-label').textContent =
        redirectEnabled ? '自動遷移ON' : '自動遷移OFF';
    
      if (!redirectEnabled) {
        // 遷移をキャンセル
        clearTimeout(timeoutId);
      } else {
        // 再度タイマーを開始（5秒後に再遷移）
        timeoutId = startRedirectTimer();
      }
    });
    
    // 5秒後にリダイレクトするタイマー
    function startRedirectTimer() {
      return setTimeout(() => {
        if (redirectEnabled) {
          window.location.href = TARGET_URL;
        }
      }, DELAY_MS);
    }
    </script>
</body>
</html>



